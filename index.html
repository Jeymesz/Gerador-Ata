<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ata Sacramental</title>
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,600;1,400&family=Raleway:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
:root {
  --gold: #8B6914; --gold-light: #C9992A; --cream: #FAF7F2;
  --dark: #1C1810; --muted: #6B6050; --border: #D4C9B0;
  --accent: #4A3728; --blue: #003366;
}
* { box-sizing: border-box; margin: 0; padding: 0; }

body { 
  font-family: 'Raleway', sans-serif; 
  background: #2C2416; 
  background-image: radial-gradient(ellipse at top left, #3D3020 0%, #2C2416 60%); 
  min-height: 100vh; 
  color: var(--dark);
  overflow-x: hidden; /* Evita rolagem lateral indesejada no celular */
}

/* HEADER RESPONSIVO */
.app-header { text-align: center; padding: 1.5rem 1rem 1rem; color: var(--cream); }
.app-header h1 { font-family: 'EB Garamond', serif; font-size: 1.3rem; color: #E8D89A; }
.ala-edit-input { width: 90%; max-width: 280px; font-size: 0.75rem; }

/* BOTÕES DE TIPO DE REUNIÃO */
.meeting-type-bar { display: flex; flex-direction: column; gap: 0.5rem; padding: 0 1rem 1rem; }
@media (min-width: 600px) { .meeting-type-bar { flex-direction: row; } }

.mtype-btn { width: 100%; padding: 0.7rem; font-size: 0.85rem; }

/* ABAS */
.tabs { display: flex; width: 100%; padding: 0 0.5rem 1rem; gap: 0.4rem; }
.tab-btn { flex: 1; padding: 0.6rem 0.2rem; font-size: 0.7rem; white-space: nowrap; }

.container { width: 100%; max-width: 860px; margin: 0 auto; padding: 0 0.6rem 3rem; }

/* FORMULÁRIO RESPONSIVO */
.form-panel { background: var(--cream); border-radius: 12px; padding: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }

/* GRID QUE MUDA DE 1 PARA 2 COLUNAS */
.form-grid { display: grid; grid-template-columns: 1fr; gap: 0.8rem; }
@media (min-width: 600px) {
  .form-grid { grid-template-columns: 1fr 1fr; }
  .form-grid.cols3 { grid-template-columns: 1fr 1fr 1fr; }
}

.field label { font-size: 0.65rem; }
.field input, .field textarea, .field select { 
  font-size: 16px !important; /* Tamanho 16px evita zoom automático no iOS ao focar */
  padding: 0.7rem; 
}

/* AJUSTE CHAMADO ROW PARA TELAS PEQUENAS */
.chamado-row { 
  grid-template-columns: 70px 1fr auto; 
  gap: 0.4rem; 
  padding: 0.4rem;
}

/* MODAL CELULAR */
.modal-box { width: 95%; max-height: 90vh; }

/* PREVIEW / CARDS */
.action-bar { 
  display: grid; 
  grid-template-columns: 1fr 1fr; /* Botões lado a lado no celular */
  gap: 0.5rem; 
  padding: 0.5rem; 
}
.btn-print { grid-column: span 2; } /* Imprimir ocupa a linha toda */

.ata-meta-row { display: grid; grid-template-columns: 1fr 1fr; gap: 0.4rem; }
.ata-meta-item strong { font-size: 0.85rem; }

.ata-card-grid3, .ata-card-grid2 { 
  grid-template-columns: 1fr !important; /* Empilha tudo no card do preview */
  gap: 0.6rem; 
}

@media (min-width: 480px) {
    .ata-card-grid2 { grid-template-columns: 1fr 1fr !important; }
}

/* Ajuste Assinaturas */
.ata-sigs { flex-direction: column; gap: 1.5rem; margin-top: 1rem; }
.ata-sig { border-top: 1px solid #CCC; width: 80%; margin: 0 auto; }

</style>
</head>
<body>

<div class="app-header">
  <div class="crest">&#9962;</div>
  <h1>Ata Sacramental</h1>
  <div class="ala-edit-wrap">
    <input type="text" id="ala-nome" value="Ala Vila Gois" class="ala-edit-input" placeholder="Nome da Ala..." />
  </div>
</div>

<div class="meeting-type-bar">
  <button class="mtype-btn active" id="mtype-normal" onclick="setMeetingType('normal')">Reuniao Normal</button>
  <button class="mtype-btn" id="mtype-testemunho" onclick="setMeetingType('testemunho')">Testemunhos</button>
</div>

<div class="tabs">
  <button class="tab-btn active" onclick="showTab('form')">Preencher</button>
  <button class="tab-btn" onclick="showTab('preview')">Visualizar</button>
</div>

<div class="container">
  <div id="tab-form" class="form-panel">
    <div class="form-section">
        <div class="form-section-title">Dados Básicos</div>
        <div class="form-grid">
            <div class="field"><label>Data</label><input type="date" id="data"></div>
            <div class="field"><label>Frequência</label><input type="number" id="frequencia"></div>
        </div>
    </div>
    
    <button class="generate-btn" onclick="generateAta()">Gerar Ata</button>
  </div>

  <div id="tab-preview" style="display:none">
    <div class="action-bar" id="action-bar">
      <button class="action-btn btn-whats" onclick="shareWhatsApp()">WhatsApp</button>
      <button class="action-btn btn-image" onclick="saveAsImage()">Imagem</button>
      <button class="action-btn btn-print" onclick="window.print()">Imprimir</button>
    </div>
    <div id="ata-output" class="ata-cards-container"></div>
  </div>
</div>

</body>
</html>
